# Example configuration file for IPV detection
# Copy to config.yml and customize for your environment

# API Configuration
api:
  url: "http://localhost:1234/v1/chat/completions"
  model: "openai/gpt-oss-120b"
  timeout: 30
  max_retries: 3

# Prompt Configuration
prompts:
  default: "Analyze for intimate partner violence: %s\nReturn JSON: {detected: bool, confidence: 0-1}"
  law_enforcement: "From law enforcement perspective, detect IPV in: %s"
  medical_examiner: "From medical examiner perspective, detect IPV in: %s"

# Database Configuration  
database:
  type: "auto"  # "auto", "sqlite", or "postgresql"
  
  # SQLite Configuration (for development/testing)
  sqlite:
    path: "llm_results.db"
    create: true
    
  # PostgreSQL Configuration (for production)
  postgresql:
    # Connection settings (use environment variables for production)
    host: "${POSTGRES_HOST:-localhost}"
    port: "${POSTGRES_PORT:-5432}"
    dbname: "${POSTGRES_DB:-ipv_detection}"
    user: "${POSTGRES_USER:-postgres}"
    password: "${POSTGRES_PASSWORD:-changeme}"
    
    # Connection tuning
    timeout: 10
    retry_attempts: 3
    
    # Performance settings
    chunk_size: 5000  # Records per batch for optimal PostgreSQL performance
    enable_ssl: false  # Set true for production
    
    # Connection pooling (future enhancement)
    pool:
      min_connections: 2
      max_connections: 20
      idle_timeout: 300

# Processing Options
processing:
  batch_size: 100
  parallel_cores: 4
  progress_bar: true
  
  # Database-specific optimization
  sqlite_chunk_size: 1000    # Optimal for SQLite
  postgresql_chunk_size: 5000 # Optimal for PostgreSQL

# Performance Monitoring
performance:
  enable_metrics: true
  benchmark_on_startup: false
  target_insert_rate: 5000    # inserts/second for PostgreSQL
  connection_health_check: true
  
  # Alerts and thresholds
  thresholds:
    connection_timeout_ms: 100
    slow_query_ms: 1000
    error_rate_percent: 5

# Environment Variables
# Copy these to your .env file or set as system environment variables
environment:
  # Required for PostgreSQL
  POSTGRES_HOST: "your-postgres-host"
  POSTGRES_PORT: "5432"  
  POSTGRES_DB: "ipv_detection"
  POSTGRES_USER: "ipv_user"
  POSTGRES_PASSWORD: "your-secure-password"
  
  # Optional settings
  POSTGRES_SSL: "false"
  POSTGRES_TIMEOUT: "10"
  
  # API keys (if using external LLM services)
  OPENAI_API_KEY: "your-api-key"
  ANTHROPIC_API_KEY: "your-api-key"

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  file: "logs/ipv_detection.log"
  
  # Performance logging
  log_performance: true
  log_slow_queries: true
  log_connection_events: false