# IPV Detection System Configuration
# Copy this file to settings.yml and adjust values as needed

# API Provider Configuration
api:
  # OpenAI Configuration
  openai:
    key_env: "OPENAI_API_KEY"
    endpoint: "https://api.openai.com/v1/chat/completions"
    model: "gpt-4o-mini"
    temperature: 0
    rate_limit:
      requests_per_minute: 90
      tokens_per_minute: 90000
    timeout: 120
    retry:
      max_attempts: 3
      delay_seconds: 60
  
  # Ollama Configuration
  ollama:
    endpoint: "http://192.168.10.21:11434/api/generate"
    model: "llama3.1:8b"
    temperature: 0
    timeout: 300
    retry:
      max_attempts: 3
      delay_seconds: 30

# Processing Configuration
processing:
  # Batch processing settings
  batch_size: 20
  max_parallel_batches: 4
  
  # Progress tracking
  checkpoint_interval: 10
  checkpoint_dir: "checkpoints"
  
  # Error handling
  max_retries: 3
  retry_delay: 60
  continue_on_error: true
  
  # Validation
  validate_inputs: true
  validate_outputs: true
  min_confidence_score: 0.8

# Cache Configuration
cache:
  enabled: true
  directory: "cache"
  ttl_days: 30
  max_size_gb: 10
  compression: true
  
  # Cache strategies
  strategy: "content_hash"  # content_hash, timestamp, or hybrid
  
  # Performance
  parallel_reads: true
  batch_cache_operations: true

# Logging Configuration
logging:
  level: "INFO"  # DEBUG, INFO, WARN, ERROR
  directory: "logs"
  
  # Log files
  main_log: "ipv_detection.log"
  error_log: "errors.log"
  performance_log: "performance.log"
  
  # Rotation
  max_file_size_mb: 100
  max_files: 10
  
  # Formatting
  include_timestamp: true
  include_context: true
  json_format: false

# Output Configuration
output:
  directory: "output"
  
  # File naming
  timestamp_format: "%Y%m%d_%H%M%S"
  include_timestamp: true
  
  # Formats
  formats:
    - csv
    - xlsx
  
  # Content
  include_metadata: true
  include_rationale: true
  include_confidence_scores: true

# Performance Monitoring
monitoring:
  enabled: true
  
  # Metrics collection
  collect_performance_metrics: true
  collect_api_metrics: true
  collect_cache_metrics: true
  
  # Thresholds
  slow_request_threshold_ms: 5000
  high_memory_threshold_mb: 1000
  
  # Reporting
  report_interval_minutes: 60
  report_directory: "monitoring"

# Data Quality
quality:
  # Input validation
  require_incident_id: true
  min_narrative_length: 10
  max_narrative_length: 10000
  
  # Output validation
  required_fields:
    - sequence
    - ipv_between_intimate_partners
    - rationale
  
  # Quality checks
  check_consistency: true
  flag_low_confidence: true
  audit_trail: true

# System Prompts
prompts:
  # System prompt configuration
  include_examples: false
  emphasis_on_evidence: true
  structured_output: true
  
  # Customization
  custom_instructions: ""
  additional_fields: []

# Development Settings
development:
  # Debug mode
  debug: false
  verbose_errors: false
  
  # Testing
  use_mock_api: false
  mock_response_dir: "tests/fixtures"
  
  # Profiling
  enable_profiling: false
  profile_output_dir: "profiling"