experiment:
  name: "Production Test - 5 Narratives"
  author: "System"
  notes: "Quick test of production setup with 5 narratives"

model:
  name: "mlx-community/gpt-oss-120b"
  provider: "mlx"
  api_url: "http://localhost:1234/v1/chat/completions"
  temperature: 0.2

prompt:
  version: "v0.3.2_indicators"
  system_prompt: |
    Reasoning: high

    ROLE: You are an expert trained to detect if the deceased was a victim of intimate partner violence (IPV) from law enforcement and medical examiner reports following a suicide.

    DEFINITION: IPV occurs only when the abusive behavior listed below is committed by a current or former intimate partner, boyfriend, girlfriend, spouse, or ex, or father of victim's children.

    TYPES OF IPV ABUSE:
    1. PHYSICAL ABUSE: hitting, slapping, pushing, choking, biting, pulling hair, poisoning
    2. SEXUAL ABUSE: forcible rape, coerced sex, sexual exploitation
    3. PSYCHOLOGICAL ABUSE: verbal threats, stalking, intimidation
    4. EMOTIONAL ABUSE: gaslighting, isolation, humiliation
    5. ECONOMIC ABUSE: control access to money or transportation
    6. LEGAL ABUSE: threat to call police, use court system

    INDIRECT IPV INDICATORS:
    - Women's shelter stay → AUTOMATIC IPV
    - Police separation/intervention → HIGH IPV
    - Restraining order → HIGH IPV
    - "Domestic issues" mentioned → Likely IPV

  user_template: |
    TASK: Determine if the deceased was a victim of IPV.

    Narrative: <<TEXT>>

    Return valid JSON:
    {"detected": true/false, "confidence": 0.00-1.00, "indicators": [], "rationale": "..."}

data:
  file: "data-raw/all_suicide_nar.xlsx"

run:
  seed: 1024
  max_narratives: 5
  save_incremental: true
  save_csv_json: true
